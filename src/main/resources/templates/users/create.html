<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layouts/layout}">
<main layout:fragment="content">
    <h2>新規社員登録</h2>
    <div>
        <form method="post" id="userCreateForm" th:action="@{/user/store}" th:object="${userForm}">
            <div>
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

                <label for="fn_jp">名前(正式表示)</label>
                <input id="fn_jp" type="text" name="fnJp" th:value="*{fnJp}">
                <span th:if="${#fields.hasErrors('fnJp')}" th:errors="*{fnJp}" class="error-message"></span>

                <label for=" fn_jp_hira">名前(ひらがな)</label>
                <input id="fn_jp_hira" type="text" name="fnJpHira" th:value="*{fnJpHira}">
                <span th:if="${#fields.hasErrors('fnJpHira')}" th:errors="*{fnJpHira}" class="error-message"></span>

                <label for="fn_jp_kata">名前(カタカナ)</label>
                <input id="fn_jp_kata" type="text" name="fnJpKata" th:value="*{fnJpKata}">
                <span th:if="${#fields.hasErrors('fnJpKata')}" th:errors="*{fnJpKata}" class="error-message"></span>

                <label for="fn_en">名前(英語)</label>
                <input id="fn_en" type="text" name="fnEn" th:value="*{fnEn}">
                <span th:if="${#fields.hasErrors('fnEn')}" th:errors="*{fnEn}" class="error-message"></span>

                <label for="ln_jp">姓(正式表示)</label>
                <input id="ln_jp" type="text" name="lnJp" th:value="*{lnJp}">
                <span th:if="${#fields.hasErrors('lnJp')}" th:errors="*{lnJp}" class="error-message"></span>

                <label for="ln_jp_hira">姓(ひらがな)</label>
                <input id="ln_jp_hira" type="text" name="lnJpHira" th:value="*{lnJpHira}">
                <span th:if="${#fields.hasErrors('lnJpHira')}" th:errors="*{lnJpHira}" class="error-message"></span>

                <label for="ln_jp_kata">姓(カタカナ)</label>
                <input id="ln_jp_kata" type="text" name="lnJpKata" th:value="*{lnJpKata}">
                <span th:if="${#fields.hasErrors('lnJpKata')}" th:errors="*{lnJpKata}" class="error-message"></span>

                <label for="ln_en">姓(英語)</label>
                <input id="ln_en" type="text" name="lnEn" th:value="*{lnEn}">
                <span th:if="${#fields.hasErrors('lnEn')}" th:errors="*{lnEn}" class="error-message"></span>

                <label for="oln_jp">旧姓(正式表示)</label>
                <input id="oln_jp" type="text" name="olnJp" th:value="*{olnJp}">
                <span th:if="${#fields.hasErrors('olnJp')}" th:errors="*{olnJp}" class="error-message"></span>

                <label for="oln_jp_hira">旧姓(ひらがな)</label>
                <input id="oln_jp_hira" type="text" name="olnJpHira" th:value="*{olnJpHira}">
                <span th:if="${#fields.hasErrors('olnJpHira')}" th:errors="*{olnJpHira}" class="error-message"></span>

                <label for="oln_jp_kata">旧姓(カタカナ)</label>
                <input id="oln_jp_kata" type="text" name="olnJpKata" th:value="*{olnJpKata}">
                <span th:if="${#fields.hasErrors('olnJpKata')}" th:errors="*{olnJpKata}" class="error-message"></span>

                <label for="oln_en">旧姓(英語)</label>
                <input id="oln_en" type="text" name="olnEn" th:value="*{olnEn}">
                <span th:if="${#fields.hasErrors('olnEn')}" th:errors="*{olnEn}" class="error-message"></span>

                <label for="mn_jp">ミドルネーム(正式表示)</label>
                <input id="mn_jp" type="text" name="mnJp" th:value="*{mnJp}">
                <span th:if="${#fields.hasErrors('mnJp')}" th:errors="*{mnJp}" class="error-message"></span>

                <label for="mn_jp_hira">ミドルネーム(ひらがな)</label>
                <input id="mn_jp_hira" type="text" name="mnJpHira" th:value="*{mnJpHira}">
                <span th:if="${#fields.hasErrors('mnJpHira')}" th:errors="*{mnJpHira}" class="error-message"></span>

                <label for="mn_jp_kata">ミドルネーム(カタカナ)</label>
                <input id="mn_jp_kata" type="text" name="mnJpKata" th:value="*{mnJpKata}">
                <span th:if="${#fields.hasErrors('mnJpKata')}" th:errors="*{mnJpKata}" class="error-message"></span>

                <label for="mn_en">ミドルネーム(英語)</label>
                <input id="mn_en" type="text" name="mnEn" th:value="*{mnEn}">
                <span th:if="${#fields.hasErrors('mnEn')}" th:errors="*{mnEn}" class="error-message"></span>

                <label for="email">メールアドレス</label>
                <input id="email" type="text" name="email" th:value="*{email}">
                <span th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="error-message"></span>

                <label for="password">パスワード</label>
                <input id="password" type="password" name="password">
                <span th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="error-message"></span>

                <label for="employee_no">社員番号</label>
                <input id="employee_no" type="number" name="employeeNo" th:value="*{employeeNo}">
                <span th:if="${#fields.hasErrors('employeeNo')}" th:errors="*{employeeNo}" class="error-message"></span>

                <label for="joining_date">入社日</label>
                <input id="joining_date" type="text" name="joiningDate" th:value="*{joiningDate}">
                <div th:if="${joiningDateMessages != null and !joiningDateMessages.isEmpty()}">
                    <div th:each="msg : ${joiningDateMessages}" th:text="${msg}" class="error-message"></div>
                </div>

                <div>
                    <label for="display_first_name">ファーストネームを先に表示</label>
                    <input id="display_first_name" type="checkbox" name="englishNotation" value="true"
                        th:checked="*{englishNotation}">
                </div>

                <input type="button" value="登録" onclick="validAndConfirm()">
                <script>
                    function validAndConfirm() {
                        const form = document.getElementById("userCreateForm");

                        if (!form.checkValidity()) {
                            form.reportValidity();
                            return;
                        }
                        if (confirm("登録します。宜しいですか？")) {
                            form.submit();
                        }
                    }
                </script>
            </div>
            <div>
                <input type="button" value="キャンセル" onclick="cancelRegister()">
                <script>
                    function cancelRegister() {
                        if (confirm("キャンセルします。宜しいですか？")) {
                            window.location.href = "/user/index";
                        }
                    }
                </script>
            </div>
            <div>
                <span th:if="${successMessage}" th:text="${successMessage}"></span>
            </div>
        </form>
        <a th:href="@{/user/index}">ユーザー一覧へ戻る</a>
    </div>
</main>

</html>